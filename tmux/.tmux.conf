# =========================================
# TMUX CONFIGURATION (stow-managed)
# File: ~/dotfiles/tmux/.tmux.conf
# Symlinked to ~/.tmux.conf via:  stow -vt ~ tmux
# Reload after edits (inside tmux):  tmux source-file ~/.tmux.conf
# =========================================

##### Terminal & colors ########################################################
# Truecolor and better terminfo
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:RGB,screen-256color:RGB"

# Faster key repeat
set -s escape-time 10

# Allow focus events (useful for some editors)
set -g focus-events on

##### Prefix & basics ##########################################################
# Use Ctrl-a as prefix (GNU screen-style)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload config quickly
bind r source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"

##### Splits & navigation ######################################################
# Split panes (quote keys to avoid parsing weirdness)
unbind '|'
unbind '-'
bind '|' split-window -h    # prefix + | : vertical split
bind '-' split-window -v    # prefix + - : horizontal split

# Vim-like pane movement
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with Alt/Option + arrows
# NOTE: In Ghostty, ensure option-as-alt = true
bind -n M-Left  resize-pane -L 5
bind -n M-Right resize-pane -R 5
bind -n M-Up    resize-pane -U 5
bind -n M-Down  resize-pane -D 5

##### Windows (tabs) ###########################################################
bind c new-window                # prefix + c : new tab
bind n next-window               # prefix + n : next tab
bind p previous-window           # prefix + p : previous tab
bind & kill-window               # prefix + & : close tab

# Jump directly to window N with Ctrl+1..9
bind -n C-1 select-window -t 1
bind -n C-2 select-window -t 2
bind -n C-3 select-window -t 3
bind -n C-4 select-window -t 4
bind -n C-5 select-window -t 5
bind -n C-6 select-window -t 6
bind -n C-7 select-window -t 7
bind -n C-8 select-window -t 8
bind -n C-9 select-window -t 9

##### Sessions #################################################################
bind s choose-session            # prefix + s : session picker
# Interactive rename (avoids ‘too few arguments’ errors)
unbind $
bind $ command-prompt -I "#S" "rename-session '%%'"
bind d detach-client             # prefix + d : detach

##### Status line ##############################################################
set -g status on
set -g status-interval 5
set -g status-justify centre
set -g status-bg black
set -g status-fg white

# Left: session name
set -g status-left-length 30
set -g status-left "#[bold]#S "

# Right: date/time
set -g status-right-length 60
set -g status-right "#[fg=green]%Y-%m-%d %H:%M "

# Window title style
setw -g window-status-current-format "#[bold][#I:#W]"
setw -g window-status-format         " #I:#W "

##### Aesthetics (subtle) ######################################################
set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour111
set -g message-style fg=black,bg=green
set -g clock-mode-colour green

##### Quality-of-life ##########################################################
# Mouse (select panes, resize, click windows)
set -g mouse on

# Start window/pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Don’t rename windows automatically (let the app titles be)
set -g allow-rename off
setw -g automatic-rename off

# Copy mode: vi keys
setw -g mode-keys vi

# Make copy-mode selection nicer (optional)
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# End of file

